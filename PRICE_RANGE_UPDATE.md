# ğŸ”¥ ä»·æ ¼åŒºé—´ç­›é€‰åŠŸèƒ½æ›´æ–°è¯´æ˜

## ğŸ“‹ é—®é¢˜åˆ†æ

### âŒ ä¹‹å‰çš„é”™è¯¯é€»è¾‘
```
è·å–8,000ä¸ªBuffå•†å“ â†’ åªåˆ†æå‰300ä¸ª â†’ è¾“å‡ºä»·å·®ç»“æœ
```

**é—®é¢˜**ï¼š
- åªåˆ†æå‰Nä¸ªå•†å“ï¼Œå¯èƒ½é”™è¿‡åé¢çš„ä¼˜è´¨å•†å“
- ä½¿ç”¨å•ä¸€é˜ˆå€¼ç­›é€‰ï¼Œä¸å¤Ÿçµæ´»
- é™åˆ¶äº†å‘ç°ä»·å·®æœºä¼šçš„æ¦‚ç‡

### âœ… ä¿®æ­£åçš„æ­£ç¡®é€»è¾‘
```
è·å–8,000ä¸ªBuffå•†å“ â†’ è·å–5,000ä¸ªæ‚ æ‚ æœ‰å“å•†å“ â†’ 
å¯¹æ‰€æœ‰å•†å“è¿›è¡Œä»·æ ¼åŒ¹é… â†’ æ ¹æ®ä»·å·®åŒºé—´ç­›é€‰ â†’ è¾“å‡ºç¬¦åˆæ¡ä»¶çš„å•†å“
```

**æ”¹è¿›**ï¼š
- å¤„ç†æ‰€æœ‰å•†å“ï¼Œä¸é™åˆ¶åˆ†ææ•°é‡
- ä½¿ç”¨ä»·æ ¼å·®å¼‚åŒºé—´ç­›é€‰ï¼ˆå¦‚3-5å…ƒï¼‰
- æœ€åæ‰é™åˆ¶è¾“å‡ºæ•°é‡
- å¤§å¹…æé«˜å‘ç°ä¼˜è´¨å•†å“çš„æ¦‚ç‡

## ğŸ”§ é…ç½®æ›´æ–°

### æ–°å¢é…ç½®é¡¹
```python
# ä»·æ ¼å·®å¼‚åŒºé—´ç­›é€‰ï¼ˆå…ƒï¼‰
PRICE_DIFF_MIN: float = 3.0    # æœ€å°ä»·å·®
PRICE_DIFF_MAX: float = 5.0    # æœ€å¤§ä»·å·®

# é‡æ–°å®šä¹‰æ•°é‡é…ç½®è¯­ä¹‰
MAX_OUTPUT_ITEMS: int = 300     # æœ€å¤§è¾“å‡ºå•†å“æ•°é‡ï¼ˆç­›é€‰åï¼‰
BUFF_MAX_PAGES: int = 100       # Buffæœ€å¤§è·å–é¡µæ•°
YOUPIN_MAX_PAGES: int = 50      # æ‚ æ‚ æœ‰å“æœ€å¤§è·å–é¡µæ•°
```

### æ–°å¢æ–¹æ³•
```python
# è·å–ä»·æ ¼åŒºé—´
Config.get_price_range() -> (min, max)

# æ£€æŸ¥ä»·å·®æ˜¯å¦åœ¨åŒºé—´å†…
Config.is_price_diff_in_range(price_diff) -> bool

# æ›´æ–°ä»·æ ¼åŒºé—´
Config.update_price_range(min_diff, max_diff)
```

## ğŸš€ æ ¸å¿ƒé€»è¾‘ä¿®æ”¹

### 1. åˆ†ææµç¨‹ä¿®æ­£
**æ–‡ä»¶**: `integrated_price_system.py`

**ä¿®æ”¹å‰**:
```python
items_to_process = items[:max_items] if max_items < total_items else items
```

**ä¿®æ”¹å**:
```python
items_to_process = items  # å¤„ç†æ‰€æœ‰å•†å“
```

### 2. ç­›é€‰é€»è¾‘æ›´æ–°
**ä¿®æ”¹å‰**:
```python
if price_diff >= self.price_diff_threshold:
```

**ä¿®æ”¹å**:
```python
if Config.is_price_diff_in_range(price_diff):
```

### 3. è¾“å‡ºé™åˆ¶è°ƒæ•´
**æ–°å¢**:
```python
# é™åˆ¶è¾“å‡ºæ•°é‡
if len(diff_items) > max_output_items:
    diff_items = diff_items[:max_output_items]
```

## ğŸ“Š æ€§èƒ½é¢„æœŸ

### æ•°æ®è·å–èƒ½åŠ›
- **Buff**: 100é¡µ Ã— 80ä¸ª = 8,000ä¸ªå•†å“
- **æ‚ æ‚ æœ‰å“**: 50é¡µ Ã— 100ä¸ª = 5,000ä¸ªå•†å“
- **æ€»è®¡**: 13,000ä¸ªå•†å“æ•°æ®

### å¤„ç†æµç¨‹
1. **æ•°æ®è·å–é˜¶æ®µ**: å¹¶è¡Œè·å–13,000ä¸ªå•†å“
2. **åŒ¹é…åˆ†æé˜¶æ®µ**: å¯¹æ‰€æœ‰å•†å“è¿›è¡ŒHashç²¾ç¡®åŒ¹é…
3. **åŒºé—´ç­›é€‰é˜¶æ®µ**: æ ¹æ®3-5å…ƒä»·å·®åŒºé—´ç­›é€‰
4. **è¾“å‡ºé™åˆ¶é˜¶æ®µ**: æŒ‰åˆ©æ¶¦ç‡æ’åºï¼Œè¾“å‡ºå‰300ä¸ª

### æ—¶é—´é¢„ä¼°
- **æ•°æ®è·å–**: 15-20ç§’
- **åŒ¹é…åˆ†æ**: 5-10ç§’
- **æ€»è€—æ—¶**: 20-30ç§’

## ğŸ¯ APIæ›´æ–°

### æ–°å¢ç«¯ç‚¹
```http
GET  /api/price_range          # è·å–ä»·æ ¼åŒºé—´
POST /api/price_range          # è®¾ç½®ä»·æ ¼åŒºé—´
```

### æ›´æ–°ç«¯ç‚¹
```http
GET  /api/settings             # æ–°å¢price_rangeå­—æ®µ
POST /api/settings             # æ”¯æŒprice_min/price_maxå‚æ•°
```

### è¯·æ±‚ç¤ºä¾‹
```javascript
// è®¾ç½®ä»·æ ¼åŒºé—´ä¸º3-5å…ƒ
fetch('/api/price_range', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
        min: 3.0,
        max: 5.0
    })
})
```

## ğŸ”„ ç›‘æ§æœåŠ¡æ›´æ–°

**æ–‡ä»¶**: `monitor.py`

**ä¿®æ”¹**:
```python
# ä½¿ç”¨æ–°çš„å‚æ•°å
await analyzer.analyze_price_differences(max_output_items=Config.MONITOR_MAX_ITEMS)
```

## ğŸ§ª æµ‹è¯•éªŒè¯

### é…ç½®éªŒè¯
```bash
python verify_config.py
```

### åŠŸèƒ½æµ‹è¯•
```bash
python test_price_range.py
```

## ğŸ“ˆ ä½¿ç”¨ç¤ºä¾‹

### 1. è®¾ç½®ä»·æ ¼åŒºé—´
```python
from config import Config

# è®¾ç½®3-5å…ƒä»·å·®åŒºé—´
Config.update_price_range(3.0, 5.0)

# æ£€æŸ¥ä»·å·®æ˜¯å¦ç¬¦åˆ
is_valid = Config.is_price_diff_in_range(4.2)  # True
```

### 2. è¿è¡Œåˆ†æ
```python
from integrated_price_system import IntegratedPriceAnalyzer

async with IntegratedPriceAnalyzer() as analyzer:
    # åˆ†ææ‰€æœ‰å•†å“ï¼Œç­›é€‰3-5å…ƒä»·å·®ï¼Œè¾“å‡ºå‰300ä¸ª
    diff_items = await analyzer.analyze_price_differences(max_output_items=300)
```

### 3. APIè°ƒç”¨
```javascript
// è·å–å½“å‰ä»·æ ¼åŒºé—´
const response = await fetch('/api/price_range');
const data = await response.json();
console.log(data.data.current_range); // "3.0-5.0å…ƒ"

// æ›´æ–°ä»·æ ¼åŒºé—´
await fetch('/api/price_range', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({min: 5.0, max: 10.0})
});
```

## âœ… éªŒè¯ç»“æœ

### é…ç½®éªŒè¯é€šè¿‡
```
ğŸ”§ é…ç½®éªŒè¯
========================================
ğŸ“Š ä»·æ ¼å·®å¼‚é…ç½®:
   æœ€å°ä»·å·®: 3.0å…ƒ
   æœ€å¤§ä»·å·®: 5.0å…ƒ
   å…¼å®¹é˜ˆå€¼: 20.0å…ƒ

ğŸ” ä»·æ ¼åŒºé—´æµ‹è¯•:
   2.0å…ƒ: âŒ ä¸ç¬¦åˆ
   3.5å…ƒ: âœ… ç¬¦åˆ
   4.0å…ƒ: âœ… ç¬¦åˆ
   5.5å…ƒ: âŒ ä¸ç¬¦åˆ
   10.0å…ƒ: âŒ ä¸ç¬¦åˆ
```

## ğŸ‰ æ€»ç»“

### å…³é”®æ”¹è¿›
1. **âœ… ä¿®æ­£å·¥ä½œæµç¨‹**: å¤„ç†æ‰€æœ‰å•†å“ â†’ åŒºé—´ç­›é€‰ â†’ é™åˆ¶è¾“å‡º
2. **âœ… ä»·æ ¼åŒºé—´ç­›é€‰**: æ”¯æŒ3-5å…ƒç­‰çµæ´»åŒºé—´è®¾ç½®
3. **âœ… æé«˜å‘ç°ç‡**: ä¸å†é”™è¿‡åé¢çš„ä¼˜è´¨å•†å“
4. **âœ… APIæ”¯æŒ**: å®Œæ•´çš„å‰åç«¯æ”¯æŒ
5. **âœ… å‘åå…¼å®¹**: ä¿ç•™åŸæœ‰é˜ˆå€¼é…ç½®

### ä½¿ç”¨å»ºè®®
- **3-5å…ƒåŒºé—´**: é€‚åˆç¨³å®šå¥—åˆ©
- **5-10å…ƒåŒºé—´**: é€‚åˆä¸­ç­‰é£é™©æŠ•èµ„
- **10-20å…ƒåŒºé—´**: é€‚åˆé«˜é£é™©é«˜æ”¶ç›Š

### æ€§èƒ½ä¼˜åŒ–
- å¹¶è¡Œæ•°æ®è·å–
- Hashç²¾ç¡®åŒ¹é…
- å†…å­˜é«˜æ•ˆå¤„ç†
- æ™ºèƒ½è¿›åº¦æ˜¾ç¤º

ç°åœ¨ç³»ç»Ÿå¯ä»¥æ›´å‡†ç¡®åœ°å‘ç°ä»·å·®æœºä¼šï¼Œæä¾›æ›´çµæ´»çš„ç­›é€‰æ¡ä»¶ï¼ğŸš€ 